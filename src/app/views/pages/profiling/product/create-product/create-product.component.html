<div [ktBusy]="isLoading" class="kt-portlet" style="overflow : hidden;">
    <div class="kt-portlet__head">
        <div class="kt-portlet__head-caption">
            <div class="kt-portlet__head-title">
                <h3 class="kt-portlet__head-text modal-header"> {{title}} 
                    <span (click)="onCloseDialog()" id="product_close" class="dialog-cross" ><i class="fa fa-times float-right"></i></span>                    
                </h3>
            </div>
        </div>
    </div>
    <!-- form start -->
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="kt-form kt-form--label-align-right" #formDirective="ngForm">
        <!-- portlet body starts -->
        <div class="kt-portlet__body" >
            <!-- form first section starts -->
            <div class="kt-form__section kt-form__section--first">
               
                <div class="col-md-12 col-lg-12 col-sm-12">
                    <!-- first row starts -->
                    <div class="row mt-8 mb-5">
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="form-group kt-form__group mb-0">
                                <label class="col-form-label pt-0">Name:</label>
                                <kt-input-field
                                id="product_name"
                                    formControlName="name"
                                    placeholder="Enter Name"
                                    (blurEvent)="logValidationErrors(this.productForm, formErrors, validationMessages)"
                                    [errorMessage]="[{ condition : formErrors.name , error : formErrors.name }]">
                                </kt-input-field>
                            </div>
                        </div>

                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="form-group kt-form__group mb-0">
                                <label class="col-form-label pt-0">Category:</label>
                                <kt-simple-dropdown
                                id="product_category"
                                    placeholder="Category"
                                    matFormFieldClass="full-width"
                                    formControlName="category"
                                    (blurEvent)="logValidationErrors(this.productForm, this.formErrors, this.validationMessages)"
                                    [optionList]="ngxsService.categories$"
                                    clickEventButtonName="Add New Category"
                                    (clickEvent)="openCategoryDialog()"
                                    propertyValue="id"
                                    propertyName="name"
                                    [errorMessage]="formErrors.category"
                                    searchPlaceholder="Search Category...">
                                </kt-simple-dropdown>
                            </div>
                        </div>
                    </div>
                    <!-- first row ends -->
                    <!-- second row starts -->
                    <div class="row mb-4">
                        <div class="col-lg-7 col-md-7 col-sm-7">
                            <div class="form-group kt-form__group mb-0">
                                <!-- <label class="col-form-label pt-0">Product Type:</label> -->
                                <div class="kt-radio-list">
                                
                                    <mat-radio-group (change)="methodChange($event)" id="product_type" formControlName="productType">
                                    <label class="col-form-label pt-0 mr-2">Product Type:</label>

                                        <mat-radio-button [value]="0">Consumable</mat-radio-button>
                                        <mat-radio-button [value]="1">Service</mat-radio-button>
                                        <mat-radio-button [value]="2">Fixed Asset</mat-radio-button>
                                        <!-- <mat-radio-button>Consumable</mat-radio-button>
                                        <mat-radio-button>Service</mat-radio-button>
                                        <mat-radio-button>Fixed product</mat-radio-button> -->
                                        <!-- <mat-error *ngIf="formErrors.productType">
                                            <strong style="font-size: 8px;">{{formErrors.productType}}</strong>
                                        </mat-error> -->
                                    </mat-radio-group>
                                    <!-- <mat-error *ngIf="formErrors.productType">
                                        <strong style="font-size: 8px;">{{formErrors.productType}}</strong>
                                    </mat-error> -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- second row ends -->
                    <!-- third row starts -->
                    <div class="row ">
                        <div *ngIf="!showAssetFields" class="col-lg-4 col-md-4 col-sm-4">
                            <div class="form-group kt-form__group mb-0">
                                <label class="col-form-label pt-0">Sales Price:</label>
                                <!-- <kt-input-field
                                id="product_sales"
                                    formControlName="salesPrice"
                                    placeholder="Enter Sales Price"
                                    [hintText]="'Optional'">
                                </kt-input-field> -->
                                <mat-form-field appearance="outline" class="full-width">
                                   <input matInput formControlName="salesPrice" placeholder="Enter Sales Price" 
                                         id="product_sales" type="number">
                                   <mat-hint align="end">Optional</mat-hint>
                                </mat-form-field>
                            </div>
                        </div>

                        <div *ngIf="showAssetFields" class="col-lg-4 col-sm-4 col-md-4">
                            <div class="form-group kt-form__group">
                              <label class="col-form-label pt-0">Acquisition Date:</label>
                              <kt-date-input 
                                formControlName="acquisitionDate" 
                                placeholder="Acquisition Date" 
                                matFormFieldClass="full-width">
                              </kt-date-input>
                            </div>
                          </div>

                          <div *ngIf="showAssetFields" class="col-lg-4 col-sm-4 col-md-4">
                            <div class="form-group kt-form__group">
                              <label class="col-form-label pt-0">Depreciation Model:</label>
                              <kt-simple-dropdown 
                                id="product_model" 
                                formControlName="depreciationModelId" 
                                (selectionChange)="getDepreciationModel($event.value)"
                                matFormFieldClass="full-width"
                                propertyName="name" 
                                propertyValue="id" 
                                [optionList]="ngxsService.depreciationModels$"
                                searchPlaceholder="Search Model..."
                                placeholder="Select Model">
                              </kt-simple-dropdown>
                            </div>
                          </div>

                        <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="form-group kt-form__group mb-0">
                                <label class="col-form-label pt-0">Purchase Price:</label>
                                <!-- <kt-input-field
                                id="product_purchase"
                                    formControlName="purchasePrice"
                                    placeholder="Enter Price"
                                    [hintText]="'Optional'">
                                </kt-input-field> -->
                                <mat-form-field appearance="outline" class="full-width">
                                    <input (keyup)="calculateDepValue()" matInput formControlName="purchasePrice" placeholder="Enter Price" 
                                          id="product_purchase" type="number">
                                    <mat-hint align="end">Optional</mat-hint>
                                </mat-form-field>
                            </div>
                        </div>

                        <div *ngIf="!showAssetFields" class="col-lg-4 col-md-4 col-sm-4">
                            <div class="form-group kt-form__group mb-0">
                                <label class="col-form-label pt-0">Sales Tax:</label>
                                <!-- <kt-input-field
                                id="product_tax"
                                    formControlName="salesTax"
                                    placeholder="Enter Sales Tax"
                                    [hintText]="'Optional'">
                                </kt-input-field> -->
                                <mat-form-field appearance="outline" class="full-width">
                                    <input matInput formControlName="salesTax" placeholder="Enter Sales Tax" 
                                          id="product_tax" type="number">
                                    <mat-hint align="end">Optional</mat-hint>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    <!-- third row ends -->
                    <!-- fourth row starts -->
                    <div class="row">
                        <div *ngIf="!showAssetFields" class="col-lg-6 col-md-6 col-sm-6">
                            <div class="form-group kt-form__group mb-0">
                                <label class="col-form-label pt-0">Unit Of Measurement:</label>
                                <kt-simple-dropdown
                                    id="product_unit"
                                    placeholder="Select Unit"
                                    matFormFieldClass="full-width"
                                    formControlName="unit"
                                    [optionList]="ngxsService.units$"
                                    (blurEvent)="logValidationErrors(this.productForm, this.formErrors, this.validationMessages)"                       
                                    [errorMessage]="formErrors.unit"
                                    propertyValue="id"
                                    propertyName="name"
                                    searchPlaceholder="Search Unit...">
                                </kt-simple-dropdown>
                            </div>
                        </div>

                        <div *ngIf="!showAssetFields" class="col-lg-6 col-md-6 col-sm-6">
                            <div class="form-group kt-form__group mb-0">
                                <label class="col-form-label pt-0">Barcode:</label>
                                <kt-input-field
                                id="product_barcode"
                                    formControlName="barcode"
                                    placeholder="Enter Barcode"
                                    [hintText]="'Optional'">
                                </kt-input-field>
                            </div>
                        </div>
                    </div>
                    <!-- fourth row ends -->

                    <!--Fixed Asset Fields-->
                    <!-- <div *ngIf="showAssetFields" class="row">
                        <div class="col-lg-6 col-sm-6 col-md-6">
                            <div class="form-group kt-form__group">
                              <label class="col-form-label pt-0">Acquisition Date:</label>
                              <kt-date-input 
                                formControlName="acquisitionDate" 
                                placeholder="Acquisition Date" 
                                matFormFieldClass="full-width">
                              </kt-date-input>
                            </div>
                          </div>

                          <div class="col-lg-6 col-sm-6 col-md-6">
                            <div class="form-group kt-form__group">
                              <label class="col-form-label pt-0">Depreciation Model:</label>
                              <kt-simple-dropdown 
                                id="product_model" 
                                formControlName="depreciationModelId" 
                                matFormFieldClass="full-width"
                                propertyName="name" 
                                propertyValue="id" 
                                [optionList]="ngxsService.depreciationModels$"
                                searchPlaceholder="Search Model..."
                                placeholder="Select Model">
                              </kt-simple-dropdown>
                            </div>
                          </div>
                    </div> -->

                    <div *ngIf="showAssetFields" class="row">
                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="form-group kt-form__group mb-0">
                                <label class="col-form-label pt-0">Salvage Value:</label>
                                <mat-form-field appearance="outline" class="full-width">
                                  <input (keyup)="calculateDepValue()" matInput formControlName="salvageValue" placeholder="Enter Salvage Value" 
                                       id="product_salvage" type="number">
                                  <!-- <mat-hint align="end">Optional</mat-hint> -->
                                </mat-form-field>
                            </div>
                          </div>

                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="form-group kt-form__group mb-0">
                                <label class="col-form-label pt-0">Depreciable Value:</label>
                                <mat-form-field appearance="outline" class="full-width">
                                  <input readonly matInput formControlName="depreciableValue" placeholder="Enter Depreciable Value" 
                                       id="product_depreciable" type="number">
                                  <!-- <mat-hint align="end">Optional</mat-hint> -->
                                </mat-form-field>
                            </div>
                          </div> 

                          <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="form-group kt-form__group mb-0">
                                <label class="col-form-label pt-0">Declining Rate:</label>
                                <mat-form-field appearance="outline" class="full-width">
                                  <input matInput formControlName="decliningRate" placeholder="Enter Declining Rate" 
                                       id="product_rate" type="number">
                                  <!-- <mat-hint align="end">Optional</mat-hint> -->
                                </mat-form-field>
                            </div>
                          </div> 
                      </div>

                      <div *ngIf="showAssetFields" class="row">
                        <div class="col-lg-6 col-sm-6 col-md-6">
                          <div class="form-group kt-form__group mb-0">
                            <label class="col-form-label pt-0">Depreciation Method:</label>
                            <kt-simple-dropdown 
                                id="product_method"
                                formControlName="depreciationMethod"
                                matFormFieldClass="full-width"
                                propertyName="name" 
                                propertyValue="id" 
                                [optionList]="method"
                                searchPlaceholder="Search..."
                                placeholder="Select Method">
                              </kt-simple-dropdown>
                          </div>
                        </div>
                    
                        <div class="col-lg-6 col-md-6 col-sm-6">
                          <div class="form-group kt-form__group mb-0">
                              <label class="col-form-label pt-0">Useful Life:</label>
                              <mat-form-field appearance="outline" class="full-width">
                                <input matInput formControlName="usefulLife" placeholder="Enter Useful Life" 
                                     id="product_usefulLife" type="number">
                                <!-- <mat-hint align="end">Optional</mat-hint> -->
                              </mat-form-field>
                          </div>
                        </div> 
                      </div>

                      <div *ngIf="showAssetFields" class="row">
                        <div class="col-lg-4 col-sm-4 col-md-4">
                            <div class="form-group kt-form__group">
                              <div apperence="outline" class="full-width">
                                <mat-slide-toggle id="product_prorata" [checked]="isActiveChecked" formControlName="prorataBasis">Prorata Basis</mat-slide-toggle>
                              </div>
                            </div>
                          </div>
                      </div>

                </div>
            </div>
            <!-- form first section ends -->
        </div>
        <!-- portlet body ends -->
        <mat-divider></mat-divider>
        <!-- portlet footer start -->
        <div class="kt-portlet__foot p-5" >
            <!-- form action starts -->
            <div class="kt-form__actions kt-form__actions mb-0">
                <div class="row">
                    <div class="col-lg-12 text-right">
                        <div *ngIf="showButtons" >
                            <button class="mr-2 app-reset-btn" type="button" id="product_reset" (click)="reset()"><i class="fas fa-undo"></i> Reset</button>
                            <button class="app-default-btn" type="submit" id="product_submit"
                            (click)="logValidationErrors(this.productForm, this.formErrors, this.validationMessages)"><i class="far fa-save"></i> Submit
                            </button>&nbsp;

                        </div>
                    </div>
                </div>
            </div>
            <!-- form action ends-->
        </div>
        <!-- portlet footer ends -->
    </form>
    <!-- form ends -->
</div>







  