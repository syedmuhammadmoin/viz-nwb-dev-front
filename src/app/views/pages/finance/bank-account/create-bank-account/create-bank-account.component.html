<div [ktBusy]="isLoading" class="kt-portlet" style="overflow : hidden;">
    <div class="kt-portlet__head">
         <div class="kt-portlet__head-caption">
              <div class="kt-portlet__head-title">
                  <span class="kt-portlet__head-icon kt-hide"><i class="la la-gear"></i></span>
                  <h3 class="kt-portlet__head-text modal-header"> {{title}} 
                    <span (click)="onCloseDialog()" id="bank_account_close" class="dialog-cross" ><i class="fa fa-times float-right"></i></span>
                  </h3>
              </div>
          </div>
      </div>
       <!--begin::Form-->
        <form [formGroup]="bankAccountForm"  (ngSubmit)="onSubmit()" class="kt-form kt-form--label-align-right" #formDirective="ngForm">
          <div class="kt-portlet__body ">
              <div class="kt-form__section kt-form__section--first">
                  <div class="col-md-12 col-lg-12 col-sm-12">
                    <div class="row mt-8 mb-5">
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="form-group kt-form__group mb-0">
                                <label class="col-form-label pt-0">Bank Name:</label>
                                <kt-input-field
                                id="bank_account_name"
                                  formControlName="bankName"
                                  placeholder="Enter bank name"
                                  (blurEvent)="logValidationErrors(this.bankAccountForm, formErrors, validationMessages)"
                                  [errorMessage]="[{ condition : formErrors.bankName , error : formErrors.bankName }]">
                                </kt-input-field>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6">
                          <div class="form-group kt-form__group mb-0">
                              <label class="col-form-label pt-0">Branch Name:</label>
                              <kt-input-field
                              id="bank_account_branch"
                                formControlName="branch"
                                placeholder="Enter branch name"
                                [hintText]="'Optional'">
                              </kt-input-field>
                          </div>
                      </div>
                    </div>
                    <!-- first row ends -->
                    <!-- second row starts -->
                    <div class="row">
                      <div class="col-lg-6 col-md-6 col-sm-6">
                          <div class="form-group kt-form__group mb-0">
                              <label class="col-form-label pt-0">Account Title:</label>
                              <kt-input-field
                              id="bank_account_title"
                                formControlName="accountTitle"
                                placeholder="Enter Account Title"
                                (blurEvent)="logValidationErrors(this.bankAccountForm, formErrors, validationMessages)"
                                [errorMessage]="[{ condition : formErrors.accountTitle , error : formErrors.accountTitle }]">
                              </kt-input-field>
                          </div>
                      </div>
                      <div class="col-lg-6 col-md-6 col-sm-6">
                        <div class="form-group kt-form__group mb-0">
                          <label class="col-form-label pt-0">Account Number:</label>
                          <!-- <kt-input-field
                          id="bank_account_number"
                            formControlName="accountNumber"
                            type="number"
                            placeholder="Enter account number"
                            (blurEvent)="logValidationErrors(this.bankAccountForm, formErrors, validationMessages)"
                            [errorMessage]="[{ condition : formErrors.accountNumber , error : formErrors.accountNumber }]">
                          </kt-input-field> -->
                          <mat-form-field appearance="outline" class="full-width">
                            <input matInput formControlName="accountNumber" placeholder="Enter account number" 
                                 id="bank_account_number" type="number" (blur)="logValidationErrors(this.bankAccountForm, this.formErrors, this.validationMessages)">
                            <mat-error *ngIf="formErrors.accountNumber">
                              <strong>{{formErrors.accountNumber}}</strong>
                            </mat-error>
                          </mat-form-field>
                      </div>
                    </div>
                  </div>
                    <!-- second row ends -->
                    <div class="row">
                      <div class="col-lg-6 col-md-6 col-sm-6">
                          <div class="form-group kt-form__group mb-0">
                              <label class="col-form-label pt-0">Account Type:</label>
                              <kt-simple-dropdown 
                              id="bank_account_type"
                               placeholder="Select Account Type" 
                               propertyValue="id" 
                               propertyName="name"
                               formControlName="bankAccountType" 
                               (blurEvent)="logValidationErrors(bankAccountForm, formErrors, validationMessages)"
                               matFormFieldClass="full-width"
                               [errorMessage]="'Account Type is required.'" 
                               [optionList]="accountTypeList">
                              </kt-simple-dropdown>
                          </div>
                      </div>
                      <div class="col-lg-6 col-md-6 col-sm-6">
                        <div class="form-group kt-form__group mb-0">
                          <label class="col-form-label pt-0">Purpose:</label>
                          <kt-input-field
                          id="bank_account_purpose"
                            formControlName="purpose"
                            type="text"
                            placeholder="Enter Purpose"
                            hintText="Optional">
                          </kt-input-field>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6">
                        <div class="form-group kt-form__group mb-0">
                            <label class="col-form-label pt-0">Opening Balance:</label>
                            <!-- <kt-input-field
                            id="bank_account_balance"
                              formControlName="openingBalance"
                              type="number"
                              placeholder="Enter opening balance"
                              (blurEvent)="logValidationErrors(this.bankAccountForm, formErrors, validationMessages)"
                              [errorMessage]="[{ condition : formErrors.openingBalance , error : formErrors.openingBalance }]">
                            </kt-input-field> -->
                            <mat-form-field appearance="outline" class="full-width">
                              <input matInput formControlName="openingBalance" placeholder="Enter opening balance" 
                                   id="bank_account_balance" type="number" (blur)="logValidationErrors(this.bankAccountForm, this.formErrors, this.validationMessages)">
                              <mat-error *ngIf="formErrors.openingBalance">
                                <strong>{{formErrors.openingBalance}}</strong>
                              </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6">
                      <div class="form-group kt-form__group mb-0">
                          <label class="col-form-label pt-0">Opening Balance Date:</label>
                          <kt-date-input
                          id="bank_account_date"
                            formControlName="OBDate"
                            placeholder="Opening Balance Date"
                            [maxDate]="dateLimit"
                            matFormFieldClass="full-width"
                            (blurEvent)="logValidationErrors(this.bankAccountForm, formErrors, validationMessages)"
                            [errorMessage]="formErrors.OBDate">
                          </kt-date-input>
                      </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-6 col-md-6 col-sm-6">
                      <div class="form-group kt-form__group mb-0">
                          <label class="col-form-label pt-0">Campus:</label>
                          <kt-simple-dropdown 
                          id="bank_account_campus"
                            placeholder="Select Campus" 
                            propertyValue="id" 
                            propertyName="name"
                            formControlName="campusId" 
                            (blurEvent)="logValidationErrors(bankAccountForm, formErrors, validationMessages)"
                            matFormFieldClass="full-width"
                            [errorMessage]="'Campus is required.'" 
                            [optionList]="ngxsService.campuses$">
                            </kt-simple-dropdown>
                      </div>
                  </div>

                  <div class="col-lg-6 col-md-6 col-sm-6">
                    <div class="form-group kt-form__group mb-0">
                        <label class="col-form-label pt-0">Account Code:</label>
                        <kt-input-field
                        id="bank_account_code"
                        formControlName="accountCode"
                        placeholder="Enter Code"
                        (blurEvent)="logValidationErrors(this.bankAccountForm, formErrors, validationMessages)"
                        [errorMessage]="[{ condition : formErrors.accountCode , error : formErrors.accountCode }]">
                      </kt-input-field>
                    </div>
                </div>
              </div>
              </div>
            </div>
          </div>
  
          <mat-divider></mat-divider>
          <div class="kt-portlet__foot p-5">
              <div class="kt-form__actions ">
                <div class="row">
                  <div class="col-lg-12">
                      <div *ngIf="showButtons" class="float-right">
                        <button *ngIf="!_id" class="mr-2 app-reset-btn" id="bank_account_reset" (click)="reset()" mat-raised-button type="button"><i class="fas fa-undo"></i> Reset</button>
                        <button  class="app-default-btn" mat-raised-button type="submit" id="bank_account_submit"
                                (click)="logValidationErrors(this.bankAccountForm, this.formErrors, this.validationMessages)"><i class="far fa-save"></i> Submit</button>&nbsp;
                     </div>
                 </div>
                </div>
             </div>
         </div>
    </form>
  </div>
  